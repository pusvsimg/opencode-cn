<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenCode 命令行工具入门指南</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h1>OpenCode</h1>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="#简介" class="nav-link">简介</a>
                <a href="#安装与配置" class="nav-link">安装配置</a>
                <a href="#快速上手" class="nav-link">快速上手</a>
                <a href="#核心命令" class="nav-link">核心命令</a>
                <a href="#进阶技巧" class="nav-link">进阶技巧</a>
                <a href="#vscode-集成" class="nav-link">VS Code</a>
                <a href="#故障排除" class="nav-link">故障排除</a>
            </div>
            <div class="nav-toggle" id="nav-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <div class="container">
        <aside class="sidebar">
            <div class="toc">
                <h3>目录</h3>
                <ul>
                    <li><a href="#简介">简介：什么是 opencode？</a></li>
                    <li><a href="#安装与配置">安装与配置</a>
                        <ul>
                            <li><a href="#安装">安装</a></li>
                            <li><a href="#配置-api-密钥">配置 API 密钥</a></li>
                        </ul>
                    </li>
                    <li><a href="#快速上手">快速上手</a>
                        <ul>
                            <li><a href="#启动会话">启动会话</a></li>
                            <li><a href="#初始化项目">初始化项目</a></li>
                            <li><a href="#第一个请求">第一个请求</a></li>
                        </ul>
                    </li>
                    <li><a href="#核心命令">核心命令详解</a>
                        <ul>
                            <li><a href="#核心操作命令">核心操作命令</a></li>
                            <li><a href="#模型与配置命令">模型与配置命令</a></li>
                            <li><a href="#上下文管理命令">上下文管理命令</a></li>
                            <li><a href="#其他实用命令">其他实用命令</a></li>
                        </ul>
                    </li>
                    <li><a href="#进阶技巧">进阶技巧与最佳实践</a>
                        <ul>
                            <li><a href="#模式与代理">模式与代理</a></li>
                            <li><a href="#上下文优化">上下文优化</a></li>
                            <li><a href="#集成工具">集成工具与自定义</a></li>
                        </ul>
                    </li>
                    <li><a href="#vscode-集成">VS Code 集成</a></li>
                    <li><a href="#故障排除">故障排除与常见问题</a></li>
                    <li><a href="#更新日志">更新日志</a></li>
                </ul>
            </div>
        </aside>

        <main class="content">
            <header class="hero">
                <h1>OpenCode 命令行工具入门指南</h1>
                <p class="hero-subtitle">强大的 AI 编程代理工具，专为终端构建</p>
                <div class="hero-buttons">
                    <a href="#快速上手" class="btn btn-primary">快速开始</a>
                    <a href="https://github.com/sst/opencode" class="btn btn-secondary" target="_blank">GitHub 仓库</a>
                </div>
            </header>

            <section id="简介" class="section">
                <h2>简介：什么是 opencode？</h2>
                <p>opencode 是一个强大的 AI 编程代理工具，专为终端构建。它是一个基于 Go 的 CLI 应用程序，将 AI 助手带入您的终端。它提供了一个 TUI（终端用户界面），用于与各种 AI 模型交互，帮助处理编码任务、调试等工作。</p>

                <div class="features">
                    <h3>主要特性</h3>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h4>🖥️ 交互式 TUI</h4>
                            <p>使用 Bubble Tea 构建，提供流畅的终端体验</p>
                        </div>
                        <div class="feature-card">
                            <h4>🤖 多 AI 提供商支持</h4>
                            <p>支持 OpenAI、Anthropic Claude、Google Gemini、AWS Bedrock、Groq、Azure OpenAI 和 OpenRouter</p>
                        </div>
                        <div class="feature-card">
                            <h4>💾 会话管理</h4>
                            <p>保存和管理多个对话会话</p>
                        </div>
                        <div class="feature-card">
                            <h4>🔧 工具集成</h4>
                            <p>AI 可以执行命令、搜索文件和修改代码</p>
                        </div>
                        <div class="feature-card">
                            <h4>📝 类 Vim 编辑器</h4>
                            <p>具有文本输入功能的集成编辑器</p>
                        </div>
                        <div class="feature-card">
                            <h4>🗄️ 持久存储</h4>
                            <p>使用 SQLite 数据库存储对话和会话</p>
                        </div>
                    </div>
                </div>

                <div class="comparison">
                    <h3>与其他工具的对比</h3>
                    <p>opencode 在功能上与 Claude Code 非常相似。主要区别在于：</p>
                    <ul>
                        <li><strong>不耦合于任何提供商</strong>：虽然推荐使用 Anthropic，但 opencode 可以与 OpenAI、Google 甚至本地模型一起使用</li>
                        <li><strong>专注于 TUI</strong>：opencode 由 neovim 用户和 terminal.shop 的创建者构建；我们将推动终端可能性的极限</li>
                        <li><strong>客户端/服务器架构</strong>：例如，这可以让 opencode 在您的计算机上运行，而您可以从移动应用程序远程驱动它</li>
                    </ul>
                </div>
            </section>

            <section id="安装与配置" class="section">
                <h2>安装与配置</h2>
                
                <div id="安装" class="subsection">
                    <h3>安装（覆盖 Windows、macOS、Linux）</h3>
                    <div class="warning">
                        <p><strong>注意：</strong>在安装前，请删除 0.1.x 之前的旧版本。</p>
                    </div>

                    <h4>通用安装脚本（macOS/Linux 推荐）</h4>
                    <pre><code class="language-bash"># 快速安装
curl -fsSL https://opencode.ai/install | bash</code></pre>

                    <p>安装脚本遵循以下优先级顺序来确定安装路径：</p>
                    <ul>
                        <li><code>$OPENCODE_INSTALL_DIR</code> - 自定义安装目录</li>
                        <li><code>$XDG_BIN_DIR</code> - 符合 XDG 基本目录规范的路径</li>
                        <li><code>$HOME/bin</code> - 标准用户二进制目录</li>
                    </ul>

                    <h4>自定义安装示例</h4>
                    <pre><code class="language-bash"># 自定义安装目录
OPENCODE_INSTALL_DIR=/usr/local/bin curl -fsSL https://opencode.ai/install | bash

# 使用 XDG 标准
XDG_BIN_DIR=$HOME/.local/bin curl -fsSL https://opencode.ai/install | bash</code></pre>

                    <h4>通过 Node.js（所有平台）</h4>
                    <pre><code class="language-bash">npm install -g opencode-ai@latest
# 或使用 bun/pnpm/yarn</code></pre>

                    <h4>Homebrew（macOS/Linux）</h4>
                    <pre><code class="language-bash">brew install sst/tap/opencode</code></pre>

                    <h4>Arch Linux</h4>
                    <pre><code class="language-bash">paru -S opencode-bin</code></pre>

                    <h4>Windows 专用</h4>
                    <div class="warning">
                        <p>目前自动安装方法在 Windows 上无法正常工作。但是，您可以从 Releases 获取二进制文件。</p>
                    </div>
                    <ol>
                        <li>访问 <a href="https://github.com/sst/opencode/releases" target="_blank">GitHub Releases</a></li>
                        <li>下载适用于 Windows 的最新二进制文件</li>
                        <li>解压文件并将 <code>opencode.exe</code> 添加到 PATH 环境变量</li>
                    </ol>

                    <h4>验证安装</h4>
                    <pre><code class="language-bash">opencode --version</code></pre>
                </div>

                <div id="配置-api-密钥" class="subsection">
                    <h3>配置 API 密钥和提供商</h3>
                    <p>使用 opencode，您可以通过配置 API 密钥来使用任何 LLM 提供商。我们建议注册 Claude Pro 或 Max，这是使用 opencode 最具成本效益的方式。注册后，运行 <code>opencode auth login</code> 并选择 Anthropic。</p>

                    <h4>推荐方式：内置授权</h4>
                    <pre><code class="language-bash">opencode auth login</code></pre>
                    <p>opencode 由 Models.dev 的提供商列表驱动，因此您可以使用 opencode auth login 来配置众多提供商。</p>

                    <h4>手动设置环境变量（备选）</h4>
                    <p>对于 OpenAI：</p>
                    <pre><code class="language-bash"># macOS/Linux
export OPENAI_API_KEY="sk-xxx"

# Windows
setx OPENAI_API_KEY "sk-xxx"</code></pre>
                </div>
            </section>

            <section id="快速上手" class="section">
                <h2>快速上手</h2>

                <div id="启动会话" class="subsection">
                    <h3>启动会话</h3>
                    <p>配置好提供商后，您可以导航到要处理的项目。运行 opencode。</p>
                    <pre><code class="language-bash">cd /path/to/your/project
opencode</code></pre>
                </div>

                <div id="初始化项目" class="subsection">
                    <h3>初始化项目 (/init)</h3>
                    <p>接下来，通过运行以下命令为项目初始化 opencode。这将让 opencode 分析您的项目并在项目根目录创建一个 AGENTS.md 文件。</p>
                    <pre><code class="language-bash">/init</code></pre>
                    <div class="tip">
                        <p><strong>提示：</strong>您应该将项目的 AGENTS.md 文件提交到 Git。这有助于 opencode 理解项目结构和使用的编码模式。</p>
                    </div>
                </div>

                <div id="第一个请求" class="subsection">
                    <h3>你的第一个请求</h3>
                    <p>使用自然语言输入需求：</p>
                    <pre><code>在我的 Express 应用中添加一个 /health 端点，返回 { status: "ok" }</code></pre>
                    <p>opencode 会：</p>
                    <ol>
                        <li>分析相关文件</li>
                        <li>显示建议的更改（diff 格式）</li>
                        <li>等待您的确认（输入 <code>y</code> 应用，<code>n</code> 取消）</li>
                    </ol>
                </div>
            </section>

            <section id="核心命令" class="section">
                <h2>核心命令详解</h2>

                <div id="核心操作命令" class="subsection">
                    <h3>核心操作命令</h3>
                    <div class="command-list">
                        <div class="command-item">
                            <code>/init</code>
                            <p>创建新的 AGENTS.md 文件</p>
                        </div>
                        <div class="command-item">
                            <code>/undo</code>
                            <p>撤销更改。从这里您可以调整提示并要求 opencode 重试</p>
                        </div>
                        <div class="command-item">
                            <code>/redo</code>
                            <p>重做更改</p>
                        </div>
                        <div class="command-item">
                            <code>/share</code>
                            <p>创建当前对话的链接并将其复制到剪贴板</p>
                        </div>
                        <div class="command-item">
                            <code>/exit</code>
                            <p>退出会话</p>
                        </div>
                    </div>
                </div>

                <div id="模型与配置命令" class="subsection">
                    <h3>模型与配置命令</h3>
                    <div class="command-list">
                        <div class="command-item">
                            <code>/models</code>
                            <p>显示所有已配置提供商中可用的模型，格式为 provider/model</p>
                        </div>
                        <div class="command-item">
                            <code>/config</code>
                            <p>调整设置</p>
                        </div>
                    </div>
                </div>

                <div id="上下文管理命令" class="subsection">
                    <h3>上下文管理命令</h3>
                    <div class="command-list">
                        <div class="command-item">
                            <code>@</code>
                            <p>使用 @ 键对项目中的文件进行模糊搜索</p>
                        </div>
                        <div class="command-item">
                            <strong>文件拖放</strong>
                            <p>将图像拖放到终端中以将其添加到提示中。opencode 可以扫描您提供的任何图像并将其添加到提示中</p>
                        </div>
                    </div>
                </div>

                <div id="其他实用命令" class="subsection">
                    <h3>其他实用命令</h3>
                    <div class="command-list">
                        <div class="command-item">
                            <code>/help</code>
                            <p>显示所有可用命令</p>
                        </div>
                        <div class="command-item">
                            <code>opencode auth login</code>
                            <p>配置提供商认证</p>
                        </div>
                        <div class="command-item">
                            <code>opencode agents new</code>
                            <p>创建新代理</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="进阶技巧" class="section">
                <h2>进阶技巧与最佳实践</h2>

                <div id="模式与代理" class="subsection">
                    <h3>模式与代理（Modes & Agents）</h3>
                    <p>opencode 带有两个内置模式：build 和 plan。您可以自定义这些或通过 opencode 配置配置自己的模式。您可以在会话期间切换模式或在配置文件中配置它们。</p>

                    <h4>Build 模式</h4>
                    <p>Build 是启用所有工具的默认模式。这是需要完全访问文件操作和系统命令的开发工作的标准模式。</p>

                    <h4>Plan 模式</h4>
                    <p>一个为规划和分析设计的受限模式。在 plan 模式下，某些工具默认被禁用。当您希望 AI 分析代码、建议更改或创建计划而不对代码库进行任何实际修改时，此模式很有用。</p>

                    <div class="tip">
                        <p><strong>提示：</strong>您可以在会话期间使用 Tab 键在模式之间切换。或者使用您配置的 switch_mode 键绑定。</p>
                    </div>
                </div>

                <div id="上下文优化" class="subsection">
                    <h3>上下文优化</h3>

                    <h4>AGENTS.md 文件的使用</h4>
                    <p>AGENTS.md 包含将包含在 LLM 上下文中的指令，以自定义其对特定项目的行为。您应该将项目的 AGENTS.md 文件提交到 Git。</p>

                    <h4>全局与项目规则</h4>
                    <p>放置在项目根目录的 AGENTS.md 是特定于项目的规则。这些仅在您在此目录或其子目录中工作时适用。您还可以在 <code>~/.config/opencode/AGENTS.md</code> 文件中拥有全局规则。这适用于所有 opencode 会话。</p>
                </div>

                <div id="集成工具" class="subsection">
                    <h3>集成工具与自定义</h3>

                    <h4>自定义命令</h4>
                    <p>OpenCode 支持用户创建的自定义命令，可以快速向 AI 助手发送预定义的提示。自定义命令是存储为 Markdown 文件的预定义提示。</p>

                    <p>创建自定义命令：</p>
                    <ol>
                        <li>在 <code>~/.config/opencode/commands/</code> 创建 <code>.md</code> 文件</li>
                        <li>文件名（不含扩展名）成为命令 ID</li>
                        <li>文件内容将作为消息发送给 AI</li>
                    </ol>

                    <h4>配置文件</h4>
                    <p>您可以使用 JSON 配置文件配置 opencode。opencode 支持 JSON 和 JSONC（带注释的 JSON）格式。</p>

                    <p>配置文件位置：</p>
                    <ul>
                        <li>全局配置：<code>~/.config/opencode/opencode.json</code></li>
                        <li>项目配置：项目根目录的 <code>opencode.json</code></li>
                    </ul>
                </div>
            </section>

            <section id="vscode-集成" class="section">
                <h2>VS Code 集成</h2>
                <p>opencode 提供 VS Code 扩展，实现无缝集成：</p>
                <ol>
                    <li>在 VS Code 扩展市场搜索 "opencode" 并安装</li>
                    <li>确保系统已安装 opencode CLI</li>
                    <li>使用快捷键：
                        <ul>
                            <li><code>Ctrl+Esc</code>：分屏打开/切换 opencode</li>
                            <li><code>Ctrl+Shift+Esc</code>：新会话</li>
                        </ul>
                    </li>
                </ol>
            </section>

            <section id="故障排除" class="section">
                <h2>故障排除与常见问题</h2>

                <h3>常见问题解决</h3>
                <div class="troubleshooting-grid">
                    <div class="troubleshooting-item">
                        <h4>1. API 密钥无效</h4>
                        <ul>
                            <li>运行 <code>opencode auth login</code> 重新配置</li>
                            <li>检查提供商配额和余额</li>
                        </ul>
                    </div>

                    <div class="troubleshooting-item">
                        <h4>2. Windows 安装问题</h4>
                        <ul>
                            <li>自动安装方法在 Windows 上不能正常工作</li>
                            <li>手动从 GitHub Releases 下载二进制文件</li>
                        </ul>
                    </div>

                    <div class="troubleshooting-item">
                        <h4>3. 上下文丢失</h4>
                        <ul>
                            <li>运行 <code>/init</code> 重建 AGENTS.md</li>
                            <li>检查文件权限</li>
                        </ul>
                    </div>

                    <div class="troubleshooting-item">
                        <h4>4. 性能问题</h4>
                        <ul>
                            <li>切换到更快的模型（使用 <code>/models</code>）</li>
                            <li>减少上下文文件数量</li>
                            <li>考虑使用 Plan 模式进行分析</li>
                        </ul>
                    </div>
                </div>

                <h3>调试模式</h3>
                <pre><code class="language-bash"># 启用调试输出
opencode --debug

# 非交互模式（用于脚本）
opencode -p "你的提示" -q</code></pre>
            </section>

            <section id="更新日志" class="section">
                <h2>更新日志</h2>

                <h3>最新功能（2025年8月）</h3>
                <ul>
                    <li>支持通过 Models.dev 支持 75+ LLM 提供商，包括本地模型</li>
                    <li>多会话：在同一项目上并行启动多个代理。可共享链接：共享任何会话的链接以供参考或调试</li>
                    <li>改进的 Windows 兼容性</li>
                    <li>增强的 LSP 集成</li>
                    <li>自定义命令支持</li>
                    <li>MCP（Model Context Protocol）集成</li>
                </ul>

                <h3>保持更新</h3>
                <pre><code class="language-bash"># 检查版本
opencode --version

# 更新到最新版本（如果通过 npm 安装）
npm update -g opencode-ai@latest</code></pre>
            </section>

            <section class="section">
                <h2>总结</h2>
                <p>opencode 是一个强大的终端原生 AI 编程助手，它将 AI 的力量直接带入您的开发环境。通过本指南，您已经学会了：</p>
                <ul>
                    <li>安装和配置 opencode</li>
                    <li>使用核心命令进行日常开发</li>
                    <li>优化上下文和使用高级功能</li>
                    <li>解决常见问题</li>
                </ul>
                <p>开始使用 opencode，体验 AI 驱动的终端编程新方式！</p>

                <div class="footer-links">
                    <a href="https://opencode.ai/docs/" target="_blank" class="btn btn-primary">官方文档</a>
                    <a href="https://github.com/sst/opencode" target="_blank" class="btn btn-secondary">GitHub 仓库</a>
                </div>
            </section>
        </main>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 OpenCode. 本文档基于官方文档编写。</p>
            <div class="footer-links">
                <a href="https://github.com/sst/opencode" target="_blank">GitHub</a>
                <a href="https://opencode.ai/docs/" target="_blank">官方文档</a>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="script.js"></script>
</body>
</html>